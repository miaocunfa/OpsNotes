---
title: "版本回退脚本"
date: "2020-06-12"
categories:
    - "技术"
tags:
    - "shell"
toc: false
indent: false
original: true
---

``` shell
#!/bin/bash

function exit_handler()
{
    echo
    echo -e "\tQuit the Program!"
    echo

    exit $EXITCODE

} # End of exit_handler function

function get_answer()
{

    unset ANSWER
    ASK_COUNT=0

    while [ -z "$ANSWER" ] # While no answer is given, keep asking.
    do
        echo

        ASK_COUNT=$[ $ASK_COUNT + 1 ]

        case $ASK_COUNT in
        2)  
            echo "请回答这个问题！"
        ;;

        3)  
            echo "再次尝试！请回答这个问题！"
        ;;

        4)  
            echo "因为你拒绝回答这个问题...."
            exit_handler                     # function transfer
        ;;
        esac

        if [ -n "$LINE2" ]
        then
            echo -e "\t"$LINE1
            echo -e "\t"$LINE2" \c"
        else
            echo -e "\t"$LINE1" \c"
        fi

        # allow 30 seconds to answer before time-out
        read -t 30 ANSWER
    done

    # Do a little variable clean-up
    unset LINE1
    unset LINE2
}

LINE1="请输入要回退的版本号！"
get_answer
version=$ANSWER


```
